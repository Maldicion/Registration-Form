<section fxLayout="column" [class.section]="applyPadding" *ngIf="{isMobile: isMobile$ | async} as data">

    <!-- filter section -->

    <section fxLayout="row" fxLayoutAlign="start" fxLayoutAlign.lt-sm="center">

        <mat-form-field appearance="outline" fxFlex.gt-sm="300px" fxFlex.sm="300px" fxFlex="100%">
            <mat-label>Enter a date range</mat-label>
            <mat-date-range-input [formGroup]="dateRangeFG" [rangePicker]="picker">
              <input matStartDate formControlName="start_date" placeholder="Start date">
              <input matEndDate formControlName="end_date" placeholder="End date">
            </mat-date-range-input>
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-date-range-picker #picker></mat-date-range-picker>
          
            <mat-error *ngIf="dateRangeFG.controls.start_date.hasError('matStartDateInvalid')">Invalid start date</mat-error>
            <mat-error *ngIf="dateRangeFG.controls.end_date.hasError('matEndDateInvalid')">Invalid end date</mat-error>
        </mat-form-field>

    </section>

    <mat-table [dataSource]="productData">

        <ng-container matColumnDef="loader">
            <mat-header-cell *matHeaderCellDef [style.width.%]="100" fxLayoutAlign="center center">
                <mat-spinner [diameter]="30"></mat-spinner>
            </mat-header-cell>
        </ng-container>

        <ng-container matColumnDef="noData">
            <mat-header-cell *matHeaderCellDef [style.width.%]="100" fxLayoutAlign="center center">
                No Data Found.
            </mat-header-cell>
        </ng-container>

        <ng-container matColumnDef="name">
            <mat-header-cell *matHeaderCellDef> Name </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{ element.name }} </mat-cell>
        </ng-container>

        <!-- <ng-container matColumnDef="category">
            <mat-header-cell *matHeaderCellDef> Category </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{ element.category }} </mat-cell>
        </ng-container> -->

        <ng-container matColumnDef="quality">
            <mat-header-cell *matHeaderCellDef> Quality </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{ element.productQuality }} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="description">
            <mat-header-cell *matHeaderCellDef> Description </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{ element.description }} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="hsn_code">
            <mat-header-cell *matHeaderCellDef> HSN Code </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{ element.hsnCode }} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="hsn_rate">
            <mat-header-cell *matHeaderCellDef> HSN Rate </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{ element.hsnRate }} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="stock">
            <mat-header-cell *matHeaderCellDef> Stock </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{ element.availableStock }} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="status">
            <mat-header-cell *matHeaderCellDef> Status </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{ element.status }} </mat-cell>
        </ng-container>

        <!-- <ng-container matColumnDef="action">
            <mat-header-cell *matHeaderCellDef fxFlex="60px"> Action </mat-header-cell>
            <mat-cell *matCellDef="let element" fxFlex="60px"> <mat-icon>visibility</mat-icon> </mat-cell>
        </ng-container> -->

        <ng-container matColumnDef="details">
            <mat-header-cell *matHeaderCellDef [style.paddingLeft.px]="8"> Details </mat-header-cell>
            <mat-cell *matCellDef="let element" [style.paddingLeft.px]="8"> 
                <div fxLayout="column">
                    <label class="mat-subheading-2"> {{ element.name }} ({{ element.availableStock }}) </label>
                    <div fxLayout="row" fxLayoutGap="5px">
                        <label class="mat-subheading-1"> {{ element.productQuality }}, </label>
                        <label class="mat-body-2"> {{ element.description }} </label>
                        <!-- <label class="mat-subheading-1"> ({{ element.products.productCategory }}) </label> -->
                    </div>
                    <label class="mat-body-2"> ({{ element.hsnCode }} / {{element.hsnRate }}) </label>
                    <label class="mat-caption gray-color"> {{ element.status }} </label>
                </div>
            </mat-cell>
        </ng-container>

        <mat-header-row *matHeaderRowDef="data.isMobile?.mobile ? mobileDisplayedColumns : desktopDisplayedColumns; sticky: true;"></mat-header-row>
        <mat-header-row *matHeaderRowDef="['loader']" fxHide [fxShow]="isApiCalling"></mat-header-row>
        <mat-header-row *matHeaderRowDef="['noData']" fxHide [fxShow]="!isApiCalling && !productData?.length"></mat-header-row>
        <mat-row *matRowDef="let row; columns: data.isMobile?.mobile ? mobileDisplayedColumns : desktopDisplayedColumns;"></mat-row>

    </mat-table>

    <mat-paginator [length]="100" [pageSize]="10" [pageSizeOptions]="[5, 10, 25, 100]" aria-label="product paginator">
    </mat-paginator>

</section>