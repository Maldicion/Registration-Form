<section fxLayout="column" *ngIf="{isMobile: isMobile$ | async} as data">

    <!-- <div>
        <button mat-flat-button color="primary" (click)="addCampaign()">Add Campaign</button>
    </div> -->

    <div class="search-section" fxLayout="row" fxLayout.lt-sm="row" fxLayoutAlign="start center" fxLayoutGap="16px" [style.width.%]="100">

        <mat-form-field appearance="outline" [style.width]="data.isMobile?.mobile ? '100%' : '250px'">
            <mat-label>Search</mat-label>
            <input matInput [formControl]="campaignSearchFC" cdkFocusInitial>
            <mat-icon matSuffix>search</mat-icon>
        </mat-form-field>

        <div fxFlex="100%" fxLayoutAlign="end center" [style.paddingBottom.px]="16">

            <button mat-flat-button color="primary" (click)="addCampaign()">Add Campaign</button>

        </div>

    </div>

    <mat-table [dataSource]="campaignData">
       
        <ng-container matColumnDef="loader">
            <mat-header-cell *matHeaderCellDef [style.width.%]="100" fxLayoutAlign="center center">
                <mat-spinner [diameter]="30"></mat-spinner>
            </mat-header-cell>
        </ng-container>

        <ng-container matColumnDef="noData">
            <mat-header-cell *matHeaderCellDef [style.width.%]="100" fxLayoutAlign="center center">
                No Data Found.
            </mat-header-cell>
        </ng-container>

        <ng-container matColumnDef="name">
            <mat-header-cell *matHeaderCellDef > Name </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{ element.name }} </mat-cell>
        </ng-container>
    
        <ng-container matColumnDef="service_type">
            <mat-header-cell *matHeaderCellDef> Service Type </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{ element.service_type }} </mat-cell>
        </ng-container>
    
        <ng-container matColumnDef="email_subject">
            <mat-header-cell *matHeaderCellDef> Email Subject </mat-header-cell>
            <mat-cell *matCellDef="let element"> {{ element.email_subject }} </mat-cell>
        </ng-container>

        <ng-container matColumnDef="message">
            <mat-header-cell *matHeaderCellDef fxFlex="150px"> Message </mat-header-cell>
            <mat-cell *matCellDef="let element" fxFlex="150px"> {{ element.message }} </mat-cell>
        </ng-container>
    
        <ng-container matColumnDef="campaign_type">
            <mat-header-cell *matHeaderCellDef fxFlex="150px"> Campaign Type </mat-header-cell>
            <mat-cell *matCellDef="let element" fxFlex="150px"> {{ element.campaign_type }} </mat-cell>
        </ng-container>
    
        <ng-container matColumnDef="status">
            <mat-header-cell *matHeaderCellDef> Status </mat-header-cell>
            <mat-cell *matCellDef="let element">
                {{ element.status }}
            </mat-cell>
        </ng-container>

        <ng-container matColumnDef="schedule_datetime">
            <mat-header-cell *matHeaderCellDef> Date/Time </mat-header-cell>
            <mat-cell *matCellDef="let element" [style.paddingRight.px]="data.isMobile?.mobile ? 8 : 24">
                {{ element.schedule_datetime | date : 'fullDate' }}
            </mat-cell>
        </ng-container>

        <ng-container matColumnDef="details">
            <mat-header-cell *matHeaderCellDef [style.paddingLeft.px]="8"> Details </mat-header-cell>
            <mat-cell *matCellDef="let element" [style.paddingLeft.px]="8">
                <div fxLayout="column" [style.paddingTop.px]="2" [style.paddingBottom.px]="2">
                    <label class="mat-subheading-2"><b> {{ element.name }}</b>({{element.service_type}}) </label>
                    <label class="mat-subheading-1 success-color"> {{ element.email_subject }} </label>
                    <!-- <label class="mat-body-2"> {{ element.mobile }} </label> -->
                    <!-- <div fxLayout="row" fxLayoutGap="2px">
                        <label class="mat-body-2"> {{ element.creditLimit | currency : 'INR' }} </label>
                        <label [ngClass]="{'success-color': element.status === 'active', 'alert-color': element.status !== 'active'}"> {{ element.status }} </label>
                    </div> -->
                    <label class="mat-caption"> {{ element.message }} </label>
                    <label class="mat-caption grey-color"> {{ element.schedule_datetime | date : 'fullDate' }} </label>
                </div>
            </mat-cell>
        </ng-container>
    
        <mat-header-row *matHeaderRowDef="data.isMobile?.mobile ? mobileDisplayedColumns : desktopDisplayedColumns; sticky: true;"></mat-header-row>
        <mat-header-row *matHeaderRowDef="['loader']" fxHide [fxShow]="isApiCalling"></mat-header-row>
        <mat-header-row *matHeaderRowDef="['noData']" fxHide [fxShow]="!isApiCalling && !campaignData.length"></mat-header-row>
        <mat-row *matRowDef="let row; columns: data.isMobile?.mobile ? mobileDisplayedColumns : desktopDisplayedColumns;"></mat-row>
        
    </mat-table>

    <mat-paginator [length]="100" [pageSize]="10" [pageSizeOptions]="[10, 25, 100]" aria-label="user paginator">
    </mat-paginator>

</section>